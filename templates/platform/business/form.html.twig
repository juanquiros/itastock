{% extends 'platform/base_platform.html.twig' %}

{% block header_title %}{{ business.id ? 'Editar comercio' : 'Nuevo comercio' }}{% endblock %}

{% block body %}
    <div class="mb-3">
        <a class="btn btn-outline-secondary" href="{{ path('platform_business_index') }}">Volver</a>
    </div>
    {{ form_start(form, { attr: { 'data-controller': 'barcode-sound-upload' } }) }}
        {{ form_row(form.name) }}
        {{ form_row(form.status) }}
        {{ form_widget(form.barcodeScanSoundPath, { attr: { 'data-barcode-sound-upload-target': 'soundPath' } }) }}
        <div class="mb-3">
            <label class="form-label">Sonido de escaneo</label>
            <input type="file" class="form-control" accept="audio/*" data-barcode-sound-upload-target="soundFile">
            <div class="form-text">Subí un audio para el pitido del escáner (solo administradores de plataforma).</div>
            <div class="d-flex align-items-center gap-2 mt-2">
                <audio controls class="{{ business.barcodeScanSoundPath ? '' : 'd-none' }}" data-barcode-sound-upload-target="preview" src="{{ business.barcodeScanSoundPath ?: '' }}"></audio>
                <button type="button" class="btn btn-outline-secondary btn-sm" data-barcode-sound-upload-target="clearButton">Quitar</button>
            </div>
        </div>
        <button class="btn btn-primary mt-3">{{ business.id ? 'Guardar' : 'Crear' }}</button>
    {{ form_end(form) }}
{% endblock %}
