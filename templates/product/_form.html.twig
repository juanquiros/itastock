{{ form_start(form, {
    attr: {
        'data-controller': 'catalog-lookup barcode-scanner',
        'data-catalog-lookup-barcode-url-value': path('app_catalog_lookup_barcode'),
        'data-catalog-lookup-name-url-value': path('app_catalog_lookup_name'),
        'data-barcode-scanner-script-url-value': asset('vendor/html5-qrcode.min.js')
    }
}) }}
{{ form_widget(form.catalogProductId, {'attr': {'data-catalog-lookup-target': 'catalogProductId'}}) }}
<div class="card shadow-sm">
    <div class="card-body">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="position-relative">
                    {{ form_row(form.name) }}
                    <div class="list-group position-absolute w-100 shadow-sm z-3 d-none" data-catalog-lookup-target="suggestions"></div>
                </div>
            </div>
            <div class="col-md-3">
                {{ form_row(form.sku) }}
            </div>
            <div class="col-md-3">
                <div class="mb-3" data-barcode-scanner-input-group>
                    {{ form_label(form.barcode) }}
                    <div class="input-group">
                        {{ form_widget(form.barcode, {
                            attr: {
                                'data-barcode-scanner-target': 'input',
                                'data-barcode-scanner-input': 'true'
                            }
                        }) }}
                        <button class="btn btn-outline-secondary d-inline-flex d-lg-none" type="button" data-action="barcode-scanner#open" data-barcode-scanner-input-id-param="{{ form.barcode.vars.id }}">
                            Escanear
                        </button>
                    </div>
                    {{ form_errors(form.barcode) }}
                    {{ form_help(form.barcode) }}
                </div>
            </div>
            <div class="col-md-4">
                {{ form_row(form.cost) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.basePrice) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.uomBase) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.allowsFractionalQty) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.qtyStep) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.stockMin) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.category) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.brand) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.isActive) }}
            </div>
            {% if form.stock is defined %}
                <div class="col-md-4">
                    {{ form_row(form.stock) }}
                </div>
            {% endif %}
            <div class="col-md-4">
                {{ form_row(form.stockAdjustment) }}
            </div>
        </div>
        <div class="mt-4 d-flex justify-content-end gap-2">
            <a class="btn btn-outline-secondary" href="{{ path('app_product_index') }}">Cancelar</a>
            <button class="btn btn-primary" type="submit">Guardar</button>
        </div>
    </div>
</div>
{% include 'shared/_barcode_scanner_modal.html.twig' %}
{{ form_end(form) }}
