{{ form_start(form, {
    attr: {
        'data-controller': 'catalog-lookup',
        'data-catalog-lookup-barcode-url-value': path('app_catalog_lookup_barcode'),
        'data-catalog-lookup-name-url-value': path('app_catalog_lookup_name')
    }
}) }}
{{ form_widget(form.catalogProductId, {'attr': {'data-catalog-lookup-target': 'catalogProductId'}}) }}
<div class="card shadow-sm">
    <div class="card-body">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="position-relative">
                    {{ form_row(form.name) }}
                    <div class="list-group position-absolute w-100 shadow-sm z-3 d-none" data-catalog-lookup-target="suggestions"></div>
                </div>
            </div>
            <div class="col-md-3">
                {{ form_row(form.sku) }}
            </div>
            <div class="col-md-3">
                {# Convención escaneo: input con data-barcode-scanner-target="input" + botón con data-action y data-barcode-scanner-input-id #}
                {{ form_label(form.barcode) }}
                <div class="input-group" data-barcode-scanner-scope>
                    {{ form_widget(form.barcode) }}
                    <button
                        type="button"
                        class="btn btn-outline-secondary d-inline-flex d-md-none align-items-center"
                        data-action="barcode-scanner#open"
                        data-barcode-scanner-input-id="{{ form.barcode.vars.id }}"
                    >
                        Escanear
                    </button>
                </div>
                {{ form_errors(form.barcode) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.cost) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.basePrice) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.uomBase) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.allowsFractionalQty) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.qtyStep) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.stockMin) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.category) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.brand) }}
            </div>
            <div class="col-md-4">
                {{ form_row(form.isActive) }}
            </div>
            {% if form.stock is defined %}
                <div class="col-md-4">
                    {{ form_row(form.stock) }}
                </div>
            {% endif %}
            <div class="col-md-4">
                {{ form_row(form.stockAdjustment) }}
            </div>
        </div>
        <div class="mt-4 d-flex justify-content-end gap-2">
            <a class="btn btn-outline-secondary" href="{{ path('app_product_index') }}">Cancelar</a>
            <button class="btn btn-primary" type="submit">Guardar</button>
        </div>
    </div>
</div>
{{ form_end(form) }}
